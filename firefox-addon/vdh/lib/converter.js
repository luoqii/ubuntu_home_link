/* Copyright (C) 2006-2016 Michel Gutierrez <mig@downloadhelper.net>
 * All Rights Reserved
 * 
 * If you are interested in methods used in this project, follow the
 * open source project at https://github.com/mi-g/fang
 */

function TryExecute(){function e(){if(a>=t.length){running=!1;try{r.callback&&r.callback(o.status,o.stdout,o.stderr)}catch(s){}TryExecute()}else{if(r.step)try{step(a)}catch(s){}exports.doExecute(t[a++],function(r,s,n){r&&(a=t.length),o={status:r,stdout:s,stderr:n},e()},r.time,r.directory)}}if(!running&&0!=execQueue.length){running=!0;var r=execQueue.shift(),t=r.argsArray;r.args&&(t=[r.args]);var o,a=0;e()}}function GetConverterInfo(){function e(){Cu["import"]("resource://gre/modules/FileUtils.jsm");var e=["/usr/bin/avconv","/usr/local/bin/avconv","/usr/bin/ffmpeg","/usr/local/bin/ffmpeg"],r=simplePrefs.prefs["converter-path"]||null;return r&&(e.unshift(r),r=null),e.forEach(function(e){try{if(r)return!1;var t=new FileUtils.File(e);return t.exists()&&t.isFile()&&t.isExecutable()?(r=e,!1):!0}catch(o){return!0}}),r}function r(){try{var e=Cc["@mozilla.org/windows-registry-key;1"].createInstance(Ci.nsIWindowsRegKey);if(null==e)return system.warn("No registry service\n"),null;var r="SOFTWARE\\DownloadHelper\\ConvertHelper3";try{e.open(e.ROOT_KEY_LOCAL_MACHINE,r,e.ACCESS_READ|e.WOW64_32)}catch(a){return null}try{var s=e.readStringValue("InstallFolder");if(null==s)return e.close(),null}catch(n){return e.close(),null}try{"no"==e.readStringValue("ReliableVP9")&&(t=!0)}catch(n){}try{o=e.readStringValue("Version")}catch(n){o=null}e.close();var i=Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsILocalFile);return i.initWithPath(s),i.exists()?i.isDirectory()?i.isReadable()?(i.append("avconv.exe"),i.exists()?i.isDirectory()?(console.warn(i.path+" is a directory"),null):i.isReadable()?i.isExecutable()?i.path:(console.warn(i.path+" is not executable"),null):(console.warn(i.path+" is not readable"),null):(console.warn(i.path+" does not exist"),null)):(console.warn(s+" is not readable"),null):(console.warn(s+" is not a directory"),null):(console.warn(s+" does not exist"),null)}catch(a){return console.warn("Getting converter binary:",a,a.stack),null}}var t=!1,o=null;return binary="winnt"==system.platform?r():e(),{binary:binary,vp9out:t,convertHelperVersion:o}}function WindowsMigrateLicense(){try{var e=Cc["@mozilla.org/windows-registry-key;1"].createInstance(Ci.nsIWindowsRegKey);if(null==e)return;var r="SOFTWARE\\DownloadHelper\\ConvertHelper";try{e.open(e.ROOT_KEY_CURRENT_USER,r,e.ACCESS_READ)}catch(t){return void console.info("No",r,"entry")}var o=e.readStringValue("CustomerName"),a=e.readStringValue("CustomerEmail"),s=e.readStringValue("LicenseKey");o&&a&&s&&(merge(simpleStorage.storage.converter.license,{name:o,email:a,key:s}),SaveBackup()),e.close()}catch(n){}}function LicenseSign(e){var r=Cc["@mozilla.org/file/directory_service;1"].getService(Ci.nsIProperties).get("ProfD",Ci.nsIFile).leafName;return utils.md5("converthelper"+r+e.name+e.email+e.key)}function GetBackupFileName(){var e=Cc["@mozilla.org/file/directory_service;1"].getService(Ci.nsIProperties).get("ProfD",Ci.nsIFile);return e.append("dh-ldata.json"),e.path}function SaveBackup(e){var r=GetBackupFileName(),t=simpleStorage.storage.converter.license||{};Cu["import"]("resource://gre/modules/osfile.jsm"),OS.File.writeAtomic(r,JSON.stringify(t),{encoding:"utf-8"}).then(function(){e&&e(!0)},function(t){console.warn("could not save",r,":",t),e&&e(!1)})}function LoadBackup(e){var r=GetBackupFileName();Cu["import"]("resource://gre/modules/osfile.jsm"),OS.File.read(r,{encoding:"utf-8"}).then(function(t){try{e(JSON.parse(t))}catch(o){console.info("could not parse",r,":",o),e(null)}},function(t){console.warn("could not read",r,":",t),e(null)})}function UpdateConvertHelperVersionRequirement(){if("winnt"==system.platform&&simpleStorage.storage.converter.convertHelperVersion&&simpleStorage.storage.converter.convertHelperVersions){simpleStorage.storage.converter.update={};var e=!/^[0-9]+(\.[0-9]+)*$/.test(self.version);e?simpleStorage.storage.converter.convertHelperVersions.stable&&simpleStorage.storage.converter.convertHelperVersions.stableUrl&&simpleStorage.storage.converter.convertHelperVersions.stable!=simpleStorage.storage.converter.convertHelperVersion&&(simpleStorage.storage.converter.update.version=simpleStorage.storage.converter.convertHelperVersions.stable,simpleStorage.storage.converter.update.url=simpleStorage.storage.converter.convertHelperVersions.stableUrl):simpleStorage.storage.converter.convertHelperVersions.dev&&simpleStorage.storage.converter.convertHelperVersions.devUrl&&simpleStorage.storage.converter.convertHelperVersions.dev!=simpleStorage.storage.converter.convertHelperVersion&&(simpleStorage.storage.converter.update.version=simpleStorage.storage.converter.convertHelperVersions.dev,simpleStorage.storage.converter.update.url=simpleStorage.storage.converter.convertHelperVersions.devUrl)}}function AlertConverterRequired(e,r){alerts.alert({title:r||_("converter-required"),text:e||_("converter-needed-local"),action:{text:_("install-converter"),click:"post('installConverter')"},onMessage:function(e,r){switch(e.type){case"installConverter":r.hide(),require("sdk/tabs").open({url:"http://www.downloadhelper.net/install-converter3.php"})}}})}function BatchConvert(e,r){var t=[];e.forEach(function(e){var o="mp4",a=/\.([^\.]{1,5})$/.exec(e);a&&(o=a[1]),o=r.ext||r.params.f||o;var s={id:"local:"+e,title:e,extension:o,local:!0,autoExec:"convert",_convert:r,_downloadTarget:e};t.push(s)}),require("./hits").newData(t)}const self=require("sdk/self"),$chrome=require("chrome"),Cc=$chrome.Cc,Ci=$chrome.Ci,Cu=$chrome.Cu,Class=require("sdk/core/heritage").Class,simpleStorage=require("sdk/simple-storage"),simplePrefs=require("sdk/simple-prefs"),merge=require("sdk/util/object").merge,_=require("sdk/l10n").get,system=require("sdk/system"),childProcess=require("sdk/system/child_process"),timers=require("sdk/timers"),sdkFile=require("sdk/io/file"),log=require("./log"),Request=require("sdk/request").Request,alerts=require("./alerts"),panels=require("./panels"),utils=require("./utils");var running=!1,execQueue=[];exports.multiExecute=function(e,r,t,o,a){execQueue.push({argsArray:e,callback:r,time:t,step:o,directory:a}),o&&o(-1),TryExecute()},exports.execute=function(e,r,t,o,a){execQueue.push({args:e,callback:r,time:t,step:o,directory:a}),TryExecute()},exports.doExecute=function(e,r,t,o){var a=[],s=[];simplePrefs.prefs["converter-log-calls"]&&log.log({text:"Converter call",details:JSON.stringify(e,null,4)});var n={};o&&(n.cwd=o);var i=childProcess.spawn(simplePrefs.prefs["converter-path"],e,n);i.stdout.on("data",function(e){a.push(e)}),i.stderr.on("data",function(e){if(t){var r=/time=([0-9]+\.[0-9]+)/.exec(e);r&&t(parseFloat(r[1]))}s.push(e)}),i.on("close",function(e){r(e,a.join(""),s.join(""))})},exports.aggregate=function(e,r,t,o){var a=["-y","-i",e.audio,"-i",e.video],s=!1;"h264"==e.videoCodec&&simplePrefs.prefs["converter-aggreg-tune-h264"]&&(s=!0,e.videoCodec="libx264"),e.wm&&e.videoCodec&&e.fps?a=a.concat(["-i",e.wm.qr,"-filter_complex","[1:v][2:v] overlay="+e.wm.x+":"+e.wm.y,"-c:v",e.videoCodec]):(a.push("-c:v"),a.push(s?e.videoCodec:"copy")),s&&(a=a.concat(["-preset","fast","-tune","film","-profile:v","baseline","-level","30"])),a=a.concat(["-c:a","copy","-threads",simplePrefs.prefs["converter-threads"],"-strict","experimental",e.target]),exports.execute(a,function(e,o,a){0==e?r():t({text:_("failed-conversion"),details:a})},o)},exports.assemble=function(e,r,t){var o=["-y","-fflags","+genpts+igndts","-i"],a=[];Cu["import"]("resource://gre/modules/FileUtils.jsm"),e.chunks.forEach(function(r){if(e.directory){var t=new FileUtils.File(r);a.push(t.leafName)}else a.push(r)}),o.push("concat:"+a.join("|")),o=o.concat(["-bufsize","2M","-c","copy","-f","mp4",e.target]),exports.execute(o,function(e,o,a){0==e?r():t({text:_("failed-assembling"),details:a})},void 0,void 0,e.directory)},exports.isPresent=function(){var e=GetConverterInfo();return!!e.binary},exports.check=function(e){function r(r){i=i&&0==r,0==--n&&(simpleStorage.storage.converter.status=i?"ready":"error",e&&e())}var t=null,o=!1,a=null;simpleStorage.storage.converter.status="unchecked",simpleStorage.storage.converter.vp9support=!1,simpleStorage.storage.converter.convertHelperVersion=a;var s=GetConverterInfo();if(t=s.binary,o=s.vp9out,a=s.convertHelperVersion,t||(simpleStorage.storage.converter.status="missing"),simpleStorage.storage.converter.exePath=t||"",simplePrefs.prefs["converter-path"]=t||"",simpleStorage.storage.converter.formats={},simpleStorage.storage.converter.codecs={},t){var n=2,i=!0;exports.execute(["-codecs"],function(e,t){t.split("\n").forEach(function(e){var r=/^(.)(.)(.)(.)(.)(.)\s+([^\s]+)\s+(.*)/.exec(e);r&&(simpleStorage.storage.converter.codecs[r[7]]={name:r[7],description:r[8],decoding:"D"==r[1],encoding:"E"==r[2],type:r[3],intra:"I"==r[4],lossy:"L"==r[5],lossless:"S"==r[6]})}),simpleStorage.storage.converter.vp9support=!o&&!!simpleStorage.storage.converter.codecs.vp9&&simpleStorage.storage.converter.codecs.vp9.encoding&&simpleStorage.storage.converter.codecs.vp9.decoding,simpleStorage.storage.converter.convertHelperVersion=a,UpdateConvertHelperVersionRequirement(),r(e)}),exports.execute(["-formats"],function(e,t){t.split("\n").forEach(function(e){var r=/^\s(D|\s)(E|\s)\s+([^=\s]+)\s+(.*)/.exec(e);r&&(simpleStorage.storage.converter.formats[r[3]]={name:r[3],description:r[4],demuxing:"D"==r[1],muxing:"E"==r[2]})}),r(e)});var l=["vcd","svcd","dvd","dv","dv50"],c=["pal","ntsc","film"];simpleStorage.storage.converter.targets=[],l.forEach(function(e){c.forEach(function(r){simpleStorage.storage.converter.targets.push(r+"-"+e)})}),"winnt"==system.platform&&Math.floor(Date.now()/1e3)-simplePrefs.prefs["convertHelper.lastChecked"]>604800&&(simplePrefs.prefs["convertHelper.lastChecked"]=Math.floor(Date.now()/1e3),n++,Request({url:"https://www.downloadhelper.net/converthelper/windows/versions",onComplete:function(e){e.json&&(simpleStorage.storage.converter.convertHelperVersions=e.json,UpdateConvertHelperVersionRequirement()),r(0)}}).get())}else e&&e()},exports.info=function(e,r,t){Cu["import"]("resource://gre/modules/FileUtils.jsm");var o=new FileUtils.File(e);return o.exists()?o.isReadable()?void exports.execute(["-i",e],function(e,t,o){var a={},s=/([0-9]+)x([0-9]+)/g.exec(o);s&&(a.width=parseInt(s[1]),a.height=parseInt(s[2])),s=/Duration: ([0-9]{2}):([0-9]{2}):([0-9]{2})\.([0-9]{2})/g.exec(o),s&&(a.duration=3600*parseInt(s[1])+60*parseInt(s[2])+parseInt(s[3])),s=/Video:\s+([^\s\(,]+)/g.exec(o),s&&(a.videoCodec=s[1]),s=/([0-9]+(?:\.[0-9]+)?)\s+fps\b/g.exec(o),s&&(a.fps=parseFloat(s[1])),r(a)}):void t(_("file-not-readable")):void t(_("file-not-exists"))},exports.wmForHeight=function(e,r,t){function o(){0==--n&&(i?(l.exists()&&l.remove(!1),t(ex)):r({x:images[s].x,y:images[s].y,qr:l.path}))}var a=1/0,s=null,n=1,i=null,l=null;for(var c in images){var p=parseInt(c),u=Math.abs(e-p);a>u&&(s=c,a=u)}for(var m=Cu["import"]("resource://gre/modules/Services.jsm",{}).atob,v=m(images[s].qr),d=new Uint8Array(v.length),g=0,f=v.length;f>g;g++)d[g]=v.charCodeAt(g);Cu["import"]("resource://gre/modules/FileUtils.jsm"),l=FileUtils.getFile("TmpD",["wma.gif"]),l.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE,FileUtils.PERMS_FILE),Cu["import"]("resource://gre/modules/osfile.jsm"),OS.File.writeAtomic(l.path,d).then(function(){o()},function(e){i=e,o()})},exports.checkLicense=function(e,r){simpleStorage.storage.converter.license.status="unchecked",SaveBackup(),Request({url:"https://www.downloadhelper.net/license-check.json.php",content:{key:e,product:"converthelper"},onComplete:function(e){e.json.status&&(simpleStorage.storage.converter.license.status=e.json.status),e.json.name&&e.json.email&&e.json.key?merge(simpleStorage.storage.converter.license,{name:e.json.name,email:e.json.email,key:e.json.key,check:LicenseSign(e.json)}):(delete simpleStorage.storage.converter.license.name,delete simpleStorage.storage.converter.license.email,delete simpleStorage.storage.converter.license.key),simpleStorage.storage.converter.license.lastChecked=Date.now(),SaveBackup(),r&&r()}}).post()},exports.config=function(){return simpleStorage.storage.converter},exports.deleteRule=function(e){simpleStorage.storage.converter.rules.splice(e,1)},timers.setTimeout(function(){const e=require("./actions");var r=merge(Class({"extends":e.Action,start:function(){var e=GetConverterInfo();if(!e.binary)return void AlertConverterRequired(_("avplay.converter-required"));var r=/^(.*?)([^\\\/]{2})?([^\\\/]*?)(\.[^\\\/\.]*)?$/.exec(e.binary),t=r[1]+r[2]+"play"+(r[4]||"");Cu["import"]("resource://gre/modules/FileUtils.jsm");var o=new FileUtils.File(t);if(!o.exists()||!o.isFile()||!o.isExecutable())return void AlertConverterRequired(_("avplay.player-missing.text"),_("avplay.player-missing.title"));var a=require("sdk/system/environment").env;childProcess.spawn(t,[this.hit.data.localFilePath],{env:{DISPLAY:a.DISPLAY}})}}),{actionName:"avplay",canPerform:function(e){return simplePrefs.prefs["avplay.enabled"]&&!e.data.masked&&!!e.data.localFilePath},priority:180,catPriority:1,title:_("action.avplay.title"),description:_("action.avplay.description"),icon:"images/icon-action-avplay-64.png"});e.registerAction("avplay",r)});var defaultConfigs={"e6587753-4ca5-4d2e-b7ba-beaf1e7f191c":{title:"Re-encoded MP4 (h264/aac)",ext:"mp4",params:{"c:a":"aac",f:"mp4","c:v":"h264"},audioonly:!1,readonly:!0},"249a7d34-3640-4ac3-8300-13827811d2cf":{title:"MPEG (mpeg1+mp2)",ext:"mpg",params:{"c:a":"mp2",f:"mpeg",r:24,"c:v":"mpeg1video"},extra:"-mbd rd -trellis 2 -cmp 2 -subcmp 2 -g 100",audioonly:!1,readonly:!0},"6de4f5ce-8cfe-4f0f-8246-bacb7b0d7624":{title:"WMV 500Kb (Windows Media Player)",ext:"wmv",params:{"c:a":"wmav2",f:"asf","c:v":"wmv2","b:v":"500k"},extra:null,audioonly:!1,readonly:!0},"21a19146-e116-4460-8356-a8eab9cf61ce":{title:"WMV 1Mb (Windows Media Player)",ext:"wmv",params:{"c:a":"wmav2",f:"asf","c:v":"wmv2","b:v":"1000k"},extra:null,audioonly:!1,readonly:!0},"933b1b41-6862-4ce0-9605-10fa5e4b310c":{title:"WMV 2Mb (Windows Media Player)",ext:"wmv",params:{"c:a":"wmav2",f:"asf","c:v":"wmv2","b:v":"2000k"},extra:null,audioonly:!1,readonly:!0},"90195ab2-d891-443c-a164-8f0953ec8975":{title:"WMV 4Mb (Windows Media Player)",ext:"wmv",params:{"c:a":"wmav2",f:"asf","c:v":"wmv2","b:v":"4000k"},extra:null,audioonly:!1,readonly:!0},"3a4cc0a6-6eb0-4cff-90fb-fdf8eb6a9571":{title:"AVI 500Kb (mpeg4/mp3)",ext:"avi",params:{"c:a":"mp3",f:"avi","c:v":"mpeg4","b:v":"500k","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"ebdbb895-7a1e-43e2-bef4-be6e62cb8507":{title:"AVI 1Mb (mpeg4/mp3)",ext:"avi",params:{"c:a":"mp3",f:"avi","c:v":"mpeg4","b:v":"1000k","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"0b6280d3-f8f2-4cb6-8235-a5a4b91488f7":{title:"AVI 2Mb (mpeg4/mp3)",ext:"avi",params:{"c:a":"mp3",f:"avi","c:v":"mpeg4","b:v":"2000k","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"9ea8a22b-5738-4d0f-8494-3037ec568191":{title:"AVI 4Mb (mpeg4/mp3)",ext:"avi",params:{"c:a":"mp3",f:"avi","c:v":"mpeg4","b:a":"4000k","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"4174b9dd-c2a0-409d-801d-c84f96be0b76":{title:"MP3",ext:"mp3",params:{"b:a":"128k","c:a":"mp3",f:"mp3"},extra:null,audioonly:!0,readonly:!0},"05cb6b27-9167-4d83-833d-218a107d0376":{title:"MP3 HQ",ext:"mp3",params:{"b:a":"256k","c:a":"mp3",f:"mp3"},extra:null,audioonly:!0,readonly:!0},"69397f64-54f2-4ee4-b47a-b4fc42ee2ec1":{title:"MP4 500Kb",ext:"mp4",params:{"c:v":"mpeg4","c:a":"aac",f:"mp4","b:v":"500k","b:a":"128k",ac:2},extra:"-mbd rd -flags +mv4+aic -trellis 2 -cmp 2 -subcmp 2 -g 300",audioonly:!1,readonly:!0},"16044db3-3b75-4155-b549-c0ba19c18887":{title:"MP4 1Mb",ext:"mp4",params:{"c:v":"mpeg4","c:a":"aac",f:"mp4","b:v":"1000k","b:a":"128k",ac:2},extra:"-mbd rd -flags +mv4+aic -trellis 2 -cmp 2 -subcmp 2 -g 300",audioonly:!1,readonly:!0},"b5535083-bf16-4ae0-a21f-7c637ce0617f":{title:"MP4 2Mb",ext:"mp4",params:{"c:v":"mpeg4","c:a":"aac",f:"mp4","b:v":"2000k","b:a":"128k",ac:2},extra:"-mbd rd -flags +mv4+aic -trellis 2 -cmp 2 -subcmp 2 -g 300",audioonly:!1,readonly:!0},"dfbed97f-46c9-4db8-b5d1-4d19901bc236":{title:"MP4 4Mb",ext:"mp4",params:{"c:v":"mpeg4","c:a":"aac",f:"mp4","b:v":"4000k","b:a":"128k",ac:2},extra:"-mbd rd -flags +mv4+aic -trellis 2 -cmp 2 -subcmp 2 -g 300",audioonly:!1,readonly:!0},"912806c1-6c43-44ad-ac6e-05f105bade55":{title:"iPhone",ext:"m4v",params:{"c:v":"mpeg4","c:a":"aac",s:"480x320","b:v":"800k",f:"mp4",r:"24","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"2416dcbf-146d-4ca4-b948-f6f702fb043c":{title:"iPod",ext:"m4v",params:{"c:v":"mpeg4","c:a":"aac",s:"320x240","b:v":"500k",f:"mp4",r:"24","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"42fb9cf9-94f9-45c1-954f-1c5879f3d372":{title:"Galaxy Tab",ext:"mp4",params:{"c:a":"aac","b:a":"160k",ac:"2","c:v":"h264",f:"mp4"},extra:"-crf 22",audioonly:!1,readonly:!0},"edf545c2-88fc-4354-b91d-83e2f31d3c14":{title:"MOV (QuickTime player)",ext:"mov",params:{f:"mov","c:v":"h264",preset:"fast","profile:v":"baseline","c:a":"aac","b:a":"128k"},extra:null,audioonly:!1,readonly:!0},"f31ac68e-db3b-4b17-95d7-04456cbc3c26":{title:"Mobile 3GP (Qcif)",ext:"3gp",params:{f:"3gp","c:v":"h263","c:a":"aac","b:a":"12k",s:"176x144","b:v":"64k",ar:"8000",r:"24"},extra:null,audioonly:!1,readonly:!0},"85cd71a0-fb61-45a4-9fed-6f2e6e405bc3":{title:"MPEG-2 DVD (PAL)",ext:"mpeg",params:{f:"mpeg2video",target:"pal-dvd"},extra:null,audioonly:!1,readonly:!0},"47b9b2eb-8fd4-4e10-8993-f7d467ed1928":{title:"MPEG-2 DVD (NTSC)",ext:"mpeg",params:{f:"mpeg2video",target:"ntsc-dvd"},extra:null,audioonly:!1,readonly:!0}};exports.resetConfigs=function(){simpleStorage.storage.converter.configs=defaultConfigs},exports.showConfigs=function(){console.info("configs",JSON.stringify(simpleStorage.storage.converter.configs,null,4))},exports.resetRules=function(){simpleStorage.storage.converter.rules=[]},exports.setConfigs=function(e){e&&(simpleStorage.storage.converter.configs=e)},exports.updateRules=function(e){simpleStorage.storage.converter.rules=e},exports.updateHit=function(e){if(void 0===e.data._convert&&simpleStorage.storage.converter.rules)for(var r=0;r<simpleStorage.storage.converter.rules.length;r++){var t=simpleStorage.storage.converter.rules[r];if(!(t.convert&&!simpleStorage.storage.converter.configs[t.config]||t.ext&&e.data.extension&&t.ext!=e.data.extension)){if(t.domain){var o=!1;try{var a=new RegExp("https?://[^/]*\\b"+t.domain.replace(/\./,"\\."));e.data.url&&a.test(e.data.url)?o=!0:!o&&e.data.topUrl&&a.test(e.data.topUrl)?o=!0:!o&&e.data.videoUrl&&a.test(e.data.videoUrl)?o=!0:!o&&e.data.audioUrl&&a.test(e.data.audioUrl)&&(o=!0)}catch(s){}if(!o)continue}if(t.convert)if("ready"!=simpleStorage.storage.converter.status)log.error(_("rule-converter-unavail",e.data.title)),e.data._convert=null;else{var n=simpleStorage.storage.converter.configs[t.config];n&&(e.data.extension&&(e.data.originalExt=e.data.extension),e.data.extension=n.ext||n.params.f||e.data.extension,e.data._convert=n)}break}}},exports.status=function(e){"ready"==simpleStorage.storage.converter.status?e():exports.check(e)},exports.convert=function(e,r,t,o){var a=["-y","-i",e.source];e.wm&&e.wm.qr&&!e.config.audioonly&&(a=a.concat(["-i",e.wm.qr,"-filter_complex","[0:v][1:v] overlay="+e.wm.x+":"+e.wm.y]));var s=a.concat([]);for(var n in e.config.params){var i=e.config.params[n];null!==i&&("string"!=typeof i||i.length>0)&&(a.push("-"+n),a.push(""+i))}if(e.config.extra){var l=/^\s*(.*?)\s*$/.exec(e.config.extra)[1].split(/\s+/);l.forEach(function(e){a.push(e)})}if(e.config.audioonly&&a.push("-vn"),a=a.concat(["-threads",simplePrefs.prefs["converter-threads"],"-strict","experimental"]),e.config.twopasses){a=["-pass","2"].concat(a),a.push(e.target);var c=simplePrefs.prefs["conversion-no-pass1-params"].split(",");for(var n in e.config.params){var i=e.config.params[n];null!==i&&("string"!=typeof i||i.length>0)&&c.indexOf(n)<0&&(s.push("-"+n),s.push(""+i))}Cu["import"]("resource://gre/modules/FileUtils.jsm");var p=FileUtils.getFile("TmpD",["vdh"]);s=s.concat(["-pass","1","-passlogfile:v",p.path,"-an","-strict","experimental"]),s.push("winnt"==system.platform?"NUL":"/dev/null"),exports.multiExecute([s,a],function(e,o,a){0==e?r():t({text:_("failed-conversion"),details:a})},o)}else a.push(e.target),exports.execute(a,function(e,o,a){0==e?r():t({text:_("failed-conversion"),details:a})},o)},exports.doConvertLocal=function(e){function r(){panels.togglePanel("dlconv",{contentURL:"dlconvPanel.html",top:10,closeTimeout:0,jsFiles:["lib/jquery.min.js","lib/bootstrap/bootstrap.min.js","dlconvPanel.js"],onShow:function(r){var t=exports.config();r.port.emit("contentMessage",{type:"set",name:"formats",value:t.formats}),r.port.emit("contentMessage",{type:"set",name:"codecs",value:t.codecs}),r.port.emit("contentMessage",{type:"set",name:"targets",value:t.targets}),r.port.emit("contentMessage",{type:"set",name:"configs",value:t.configs}),r.port.emit("contentMessage",{type:"set",name:"hasConvertButton",value:!0}),r.port.emit("contentMessage",{type:"set",name:"panelTitle",value:_("convert-local-files")}),r.port.emit("contentMessage",{type:"set",name:"files",value:e}),r.port.emit("contentMessage",{type:"set",name:"transientStorageDirectory",value:require("./actions").transientStorageDirectory()}),r.port.emit("contentMessage",{type:"set",name:"renameCheckbox",value:!1})},onMessage:function(t,o){switch(t.type){case"setConfigs":exports.setConfigs(t.configs);break;case"resetConfigs":exports.resetConfigs(t.configs),o.port.emit("contentMessage",{type:"set",name:"converter",value:exports.config()});break;case"showConfigs":exports.showConfigs(t.configs);break;case"changeStorageDirectory":require("./actions").changeStorageDirectory(require("sdk/private-browsing").isPrivate(window),r);break;case"conversionHelp":o.hide(),require("sdk/tabs").open({url:"http://www.downloadhelper.net/conversion-manual3.php"});break;case"convert":o.hide();var a=exports.config().configs[t.config];a&&BatchConvert(e,a)}}})}r()},exports.batchConvert=function(e,r){BatchConvert(e,r)},exports.convertLocal=function(){if("ready"!=simpleStorage.storage.converter.status)return void AlertConverterRequired();var e=require("sdk/windows").browserWindows.activeWindow,r=Cc["@mozilla.org/appshell/window-mediator;1"].getService(Ci.nsIWindowMediator),t=r.getMostRecentWindow("navigator:browser"),o=Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);o.init(t,_("files-to-convert"),Ci.nsIFilePicker.modeOpenMultiple);var a=require("./actions").getDownloadDirectory(require("sdk/private-browsing").isPrivate(t));o.displayDirectory=a,o.appendFilter("Video","*.flv; *.FLV; *.avi; *.AVI; *.mpeg; *.MPEG; *.mpg; *.MPG; *.wmv; *.WMV; *.rm; *.RM; *.mov; *.MOV; *.mp4; *.MP4"),o.appendFilters(Ci.nsIFilePicker.filterAll);var s=null;o.open({done:function(r){if(r!=Ci.nsIFilePicker.returnCancel){s=[];for(var t=o.files;t.hasMoreElements();)s.push(t.getNext().QueryInterface(Ci.nsIFile).path);e.activate(),exports.doConvertLocal(s)}}})},exports.convertInput=function(e,r){var t=[],o=[],a=["-y","-f","rawvideo","-s",e.width+"x"+e.height,"-pix_fmt","rgba","-i","tcp://localhost:"+e.port+"?listen"];simplePrefs.prefs["scrap.extra-args"].split(/ +/).forEach(function(e){e.length&&a.push(e)}),a=a.concat(["-r",""+e.rate,"-f","mp4",e.outputFilePath]),simplePrefs.prefs["converter-log-calls"]&&log.log({text:"Converter call",details:JSON.stringify(a,null,4)});var s={stdio:["pipe","ignore","ignore"]},n=childProcess.spawn(simplePrefs.prefs["converter-path"],a,s);return n.stdout.on("data",function(e){t.push(e)}),n.stderr.on("data",function(e){o.push(e)}),n.on("close",function(e){r(e,t.join(""),o.join(""))}),n},LoadBackup(function(e){if(simpleStorage.storage.converter){simpleStorage.storage.converter.configs||exports.resetConfigs();for(var r in defaultConfigs)simpleStorage.storage.converter.configs[r]=defaultConfigs[r]}else simpleStorage.storage.converter={status:"unchecked"},exports.resetConfigs();e&&(simpleStorage.storage.converter.license=e),simpleStorage.storage.converter.license||(simpleStorage.storage.converter.license={status:"unchecked"}),simpleStorage.storage.converter.rules||(simpleStorage.storage.converter.rules=[]),"linux"!=system.platform||simplePrefs.prefs["linux-license"]?"unneeded"==simpleStorage.storage.converter.license.status&&(simpleStorage.storage.converter.license.status="unchecked"):simpleStorage.storage.converter.license.status="unneeded","winnt"!=system.platform||simpleStorage.storage.converter.licenseMigrated?"accepted"==simpleStorage.storage.converter.license.status&&LicenseSign(simpleStorage.storage.converter.license)!=simpleStorage.storage.converter.license.check&&exports.checkLicense(simpleStorage.storage.converter.license.key):(simpleStorage.storage.converter.licenseMigrated=!0,WindowsMigrateLicense(),simpleStorage.storage.converter.license.key&&exports.checkLicense(simpleStorage.storage.converter.license.key)),e&&JSON.stringify(e)==JSON.stringify(simpleStorage.storage.converter.license)||SaveBackup()});var images={240:{x:7,y:7,qr:"R0lGODlhHwAfAKEAAAAAAP///wAAAAAAACH5BAEKAAIALAAAAAAfAB8AAAKejI+pi+DvwksTQgNUZk1jWUlHFWXXZoYhWLLmd7KiK8a1etFpO3cgDKRgLLwXypXj/DY/JTLom9lKpMho0utRt0xatjt8eWDg6PF62nXX2+xIar3CSeG4ln4UL4dvyzOed6Y22CTVtNbBpEjkp5T29gHJyIY4eBYFGanVt4KGBsjZQkk1Ryba8IhipXbjN4nlVqPpc4nUKWua5LSrUAAAOw=="},481:{x:10,y:10,qr:"R0lGODlhXQBdAKEAAAAAAP///wAAAAAAACH5BAEKAAIALAAAAABdAF0AAAL+jI+py+0Po5y02ouz3gr4D4bih4iWeYzquqxuWMIVarw20N5uDJ5yrWN1PD4cJ0KaEYdGSvL4eE6kqaXTCm1Qkdhqc9rNMou5787LK4940rYQ+EV713K4mhbAu1Xp8VyPtZX3NthTV0hn5weXWMgWGIYIaEYouNd4CRnHOPn447go+ZlJuSlqqMg5GkmKCqral3CWerpX5unaive3WorJqvnrS8ibG9wZOvta+1ls66x5q2Rq+YT6fEUdGQWsbXUdPS2dPc42dyjI7U0Wes6Ivu1QHSTsjmivS39Hjw3+bX2MXzeB/QD+O4iLnxh54bTEWwhxWbpDESvSmkjLYkX+bAwwitFRziOTTa6gldrHJ9lDNSNRcjRZ8uLKlrLm1RtpMCUzUy4HMnyY6IVJCcrssXT4Q6iqmB2JvUPKE8LNC/NwaZzKruawmRqwilPZbKFXcmCZYmBq8yfIpQm5mmv3tGmQYm2jyl1H8+4NukO52N3pKVZWiU6X9dwq+KtMnYlx9npJdnEjio6NWc7AsajUnIdbwdwFV10TtDasLtWsddpom5VoKPypNiiye3FjYp2s1/Vsf6vD3AbdmW8q3kbZwgsb3PhwznGFE0Z+XOlO3lXzksZ7Wndp5Y1pe++eL+le7pS9Xye6ErLhygQZw36fMb7W9tLV2S/vkf54i7PpcK9PDd9Gb/iXX3puYTYgcAX+JdIG/SloIIMDtRcbcMfVRaB+dtUHFoYQ6lchdIt5iFyDAIIBVIRHyTWYXxuqmFc56P0VY2jgYWRid2oFKGNzZc0m2odrzRegMiai9hqRSNWlI3sTbqcki32NCNWDvTD545XlfXbQZVMKZmRDneWUWWHhgZkilL+5JxmQFHIpUJGtbTXkdG9Kmd1JcE6ioYj/3bfcgVGiSaN8gL5i1mbdNHkiirEkKlpIbuV4oY8oYvenk3NtWdsW1OmjaZ04MveWnWZqyChxUdKnUauuvgprrLLOSqtGBQAAOw=="},721:{x:15,y:15,qr:"R0lGODlhugC6AKEAAAAAAP///wAAAAAAACH5BAEKAAIALAAAAAC6ALoAAAL+jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNe2CeT6zvf+D9QtgjscMTc8Kpc/CfMJTR6NUwX0qnRit01rtrSUcsfICPkMEAepRDX6qn1v3V1S2CvHxvNRfBv8lcCnZzbYJxg4codoyLQnBMhz0+HDBglRGVk0uZFp1/NY9inJqeGpCFpIOrpZinEqAtsgC0LrGpqmeflg69F7y5vKuuvwy2EMzIBsKhy8ijDnR2ywHBDN+Ic9bU2oLercCt0t/nxQfU2enb6Nbt5c/E497l4uX688b69OH87/RIeLTiJ/3wjmwpSPWxVvB9c5klZwVjyFhxw2NIhroL7+NRAvbnzIMGBHjRTZTRS40CKtlQnPTWz30WPJiPjgjHyJ02ZIVf1ikmSZEiPCljkrCh3ac+YiiyjvLeMC8Oa+mCIZ/izKcSc4o1SlZmXK06ROsFax0vT69ajKoF2RiuWqtGnSpzDjoq1DdivNukCn2tULMq/Bq/eilvXbN21beESdNk5qeC1is2PC/usoF0hkxnMfvz1jObDawWz/As6Md7TPundTLyY9uTDm1pRRi645VrVSwpBnH1ZsGnZu3HAT3w4u0fFw5LtZ/wZufKnuzSFcyvZGnXm1Vyd9o7ouOPnnvbV1nfUeq7tWvdmjWzq/Pj346RDblx8GP3wt9fr+3dhX3hsl/NEn4HyviUcegOPJ9IF1AR4z4IHEyeQeetVF2FwjFcb30X+daUiSbSB6OB6JCYLol4gamkihgicuiCKGMZa2oUMsqthIRjMuaOKNtK0Y2o48WjiTj8/FqKOQRtpIZHRC5pfMkhRsF2WV+lHZn5VaSjkBllsmU+OUGH5ZZZhdjkkmmPdV4GWapZhZlZs/ltYkmhY4uA2OQ7pFRmjZNShjoMvh2SefLRqYAaEMzrknYFAZ+qcvgj4onGZE6glcnYhyh6iivOXJaKYcMgdop5NeNiqmlp52qaSmvlrcqatKBp1zd9qaJasXSLdabMtx+murut5Ko2eoQpj+UKTDsvnpcY8WGGyqkAJb66C4ipmssJyBaqiTxWZLbLS5bgslgrNW6lqGKe56rYR+ttDsovjJe2WIVsYLr6yHrlvmt5ReCCuMdk6CLwuK2ianui+Wu1/AC6erZcErHNxawhKrQPGR9MJAaJzM5lhxqBt3IqvH2BqCsMgndPwuuyBrrOrKJbcc7iApazzwx/8WSbPONoeM86bUMqxvokDCrPJ7I/M8rcsoA03ruSQLHfSHvnL7ndUP8zrh0jFDTWDWJYq8dJu9Vns1w6VqvS9cyjrqL9pYy8e2qmXnfLbUCj+cr4t2m3ymtXGr7WrdZMtcj6cwcT3i0F47ri26tzH+fnTNhDs9jeL5UP6y5Y9jHpHmw3H+NOifex553seq3jYfRlONurRVT0X6z6Yj3pPoXNXuOuSO88p7662/Lbl/YE89+sW6rUluupSZ3TXwykvIvLnOuwjx7xoF32Pqew9/PDObT68d9kkajnThu5NvHPGsG58+tOsPLjz84xZfX/iAy2G3tztnHLYAUu8N/Xuew+6WuKL1jHXxelbUEPi/eACweQVkW2XuAjjqTNB6FRSYsTbYNe+BkH9k89/c3GUhELKILyQ8UgZTqED1XW55MfTZk0CzthNyKYSmu6EDkbUzTUUQdgz0IZ18FzvZ3S96RhSXDU83wANqr4mrQ57+DoWoQ7NREYcyhGL5pNjDLR4nYizk1xIn9LogvqmMolIiudJ4xTV+sIY2hOMMb/BD1b2QT3b0Yg3yuLc9sgeJaQKkvdxorj5ajI16cx8aCdm8G/bxkMuKYungpqQptrGSX7xkJJ80ySM2rV6d+2Qmw2hGCmKxd90CpSYbucBO2g6TOwplKjm4yjycb0a23KQqR9W4UdItjqBT5NAE+Uux3fFkyySVZZCJy3nhrpnQoyMzmxnLhhHzjPZL5hOVNk0/VhOMtzOPH0NhzGJmc53yw+YzIXlNaPJwdnzL4RhLKEpu5pJ8vYQlPe+JyHk+EE79zN4/uebIFdJPm1VkIhr+5KnQtJ0zaa18KDs5yUh3/nOXFxTmNYXHPrx9r4Fm+VssM1q/VzqrWSb16EjN570Obq2khzvpBxOKTwu2r6YuRSlOD2pAv/EUozeNaU49iL6BjrCoAZUpSGl60P0xVakEPCov4flSCzo1eGI0KFEFp9PKSa6r6aSqVq260q7m05tFPCtQ56hWIlqyoSac5VjFWNa7utWsXORrE/MKsL0KkKFEg2kXwZnLvg2xUUDc5kd3iFg+GtWl9kxpUw/7zstSFrPAFClWu4nCckozsQabmWY5WVnImhOdk6XlVU9LEEfWlZWuRVJrYyvCoHrSepK8bYdyi71g1hZFP2VSQGc4q8sguRK2vz2ubu3K2+XqEzvADWspo3vK6Rr3jMhtYcK+C97wine85C2vec+L3vSqd73sbe96CwAAOw=="},1081:{x:25,y:25,qr:"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"}};
